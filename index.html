<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KING PONG | ACADEMY TECH</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #ff007f;
            --accent: #ffcc00;
            --bg: #050505;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            background-color: var(--bg);
            color: #fff;
            font-family: 'Orbitron', sans-serif;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-image: radial-gradient(circle at center, #111 0%, #000 100%);
        }

        /* CONTAINER DO JOGO */
        #game-container {
            position: relative;
            width: 1000px;
            height: 600px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: #000;
            box-shadow: 0 0 50px rgba(0,0,0,1), 0 0 20px rgba(0, 242, 255, 0.1);
        }

        /* EFEITO CRT / SCANLINES */
        #game-container::before {
            content: " ";
            position: absolute; inset: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px;
            z-index: 10;
            pointer-events: none;
        }

        /* INTERFACE DE PLACAR (HUD) */
        .hud {
            position: absolute;
            top: 20px; width: 100%;
            display: none;
            justify-content: space-between;
            padding: 0 80px;
            z-index: 5;
            pointer-events: none;
        }

        .score-wrapper { text-align: center; }
        .score-number { 
            font-size: 7rem; 
            font-weight: 900; 
            font-family: 'Syncopate', sans-serif;
            line-height: 1;
            background: linear-gradient(to bottom, #fff 30%, rgba(255,255,255,0.2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .player-name { font-size: 10px; letter-spacing: 5px; color: var(--primary); text-transform: uppercase; margin-top: 5px; }

        /* MENUS ESTILIZADOS */
        .overlay {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(15px);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            z-index: 100;
        }

        .menu-box {
            background: rgba(20, 20, 20, 0.8);
            padding: 40px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            border-radius: 4px;
        }

        h1 { font-size: 3.5rem; margin-bottom: 5px; letter-spacing: -2px; }
        .subtitle { color: var(--primary); font-size: 12px; letter-spacing: 10px; margin-bottom: 40px; }

        .btn {
            display: block; width: 300px; padding: 18px;
            margin: 10px auto;
            background: transparent;
            color: #fff;
            border: 1px solid #444;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #fff; color: #000;
            box-shadow: 0 0 30px var(--primary);
            transform: translateY(-3px);
        }

        /* ANNOUNCER (GOAL) */
        #announcer {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 6rem; font-weight: 900; opacity: 0; z-index: 20; color: var(--accent);
        }

        .hidden { display: none !important; }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="hud" id="hud">
            <div class="score-wrapper">
                <div id="p1-score" class="score-number">0</div>
                <div class="player-name">KING DEV</div>
            </div>
            <div class="score-wrapper">
                <div id="p2-score" class="score-number">0</div>
                <div id="p2-label" class="player-name">CORE-IA</div>
            </div>
        </div>

        <div id="announcer">POINT!</div>

        <canvas id="gameCanvas" width="1000" height="600"></canvas>

        <div id="menu-main" class="overlay">
            <div class="menu-box">
                <h1>KING PONG</h1>
                <p class="subtitle">TECHNOLOGY EDITION</p>
                <button class="btn" onclick="Game.start('ia')">VS MACHINE</button>
                <button class="btn" onclick="Game.start('pvp')" style="border-color: var(--secondary)">1 VS 1 LOCAL</button>
                <p style="font-size: 8px; margin-top: 20px; opacity: 0.3;">PLATAFORMA: KING DEV ACADEMY | © 2026</p>
            </div>
        </div>

        <div id="menu-pause" class="overlay hidden">
            <h2 style="font-size: 3rem; margin-bottom: 20px;">SYSTEM_PAUSED</h2>
            <button class="btn" onclick="Game.togglePause()">RESUME</button>
            <button class="btn" onclick="location.reload()">EXIT</button>
        </div>
    </div>

    <script>
        /**
         * KING PONG - CORE ENGINE
         * Desenvolvido para máxima performance e impacto visual.
         */

        const AudioSystem = {
            ctx: new (window.AudioContext || window.webkitAudioContext)(),
            beep(freq, duration, type = 'square') {
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, this.ctx.currentTime + duration);
                osc.connect(gain); gain.connect(this.ctx.destination);
                osc.start(); osc.stop(this.ctx.currentTime + duration);
            }
        };

        const Game = {
            active: false, paused: false, mode: 'ia',
            canvas: null, ctx: null,
            
            ball: { x: 500, y: 300, vx: 7, vy: 7, radius: 10, trail: [] },
            p1: { y: 245, score: 0 },
            p2: { y: 245, score: 0, error: 0 },
            
            keys: {}, particles: [], shake: 0,

            start(mode) {
                this.mode = mode;
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                document.getElementById('menu-main').classList.add('hidden');
                document.getElementById('hud').style.display = 'flex';
                if(mode === 'pvp') document.getElementById('p2-label').innerText = "KING P2";

                window.addEventListener('keydown', e => {
                    this.keys[e.code] = true;
                    if(e.code === 'Escape' || e.code === 'KeyP') this.togglePause();
                });
                window.addEventListener('keyup', e => this.keys[e.code] = false);

                this.active = true;
                this.resetBall();
                this.loop();
            },

            togglePause() {
                this.paused = !this.paused;
                document.getElementById('menu-pause').classList.toggle('hidden', !this.paused);
                if(!this.paused) this.loop();
            },

            resetBall() {
                this.ball.x = 500; this.ball.y = 300;
                this.ball.vx = (Math.random() > 0.5 ? 8 : -8);
                this.ball.vy = (Math.random() - 0.5) * 10;
                this.ball.trail = [];
            },

            spawnParticles(x, y, color) {
                for(let i=0; i<12; i++) {
                    this.particles.push({
                        x, y, 
                        vx: (Math.random()-0.5)*10, 
                        vy: (Math.random()-0.5)*10, 
                        life: 1.0, color
                    });
                }
            },

            update() {
                if(!this.active || this.paused) return;

                // Controles Player 1
                if(this.keys['KeyW'] && this.p1.y > 10) this.p1.y -= 12;
                if(this.keys['KeyS'] && this.p1.y < 480) this.p1.y += 12;

                // Player 2 (IA ou PVP)
                if(this.mode === 'pvp') {
                    if(this.keys['ArrowUp'] && this.p2.y > 10) this.p2.y -= 12;
                    if(this.keys['ArrowDown'] && this.p2.y < 480) this.p2.y += 12;
                } else {
                    let targetIA = this.ball.y - 55 + this.p2.error;
                    this.p2.y += (targetIA - this.p2.y) * 0.1;
                }

                // Física da Bola
                this.ball.x += this.ball.vx;
                this.ball.y += this.ball.vy;
                this.ball.trail.push({x: this.ball.x, y: this.ball.y});
                if(this.ball.trail.length > 15) this.ball.trail.shift();

                // Colisão Paredes
                if(this.ball.y < 15 || this.ball.y > 585) {
                    this.ball.vy *= -1; 
                    this.shake = 5;
                    AudioSystem.beep(150, 0.1, 'sine');
                }

                // Colisão Raquetes (Cálculo de Vetores)
                let paddle = (this.ball.x < 500) ? this.p1 : this.p2;
                let paddleX = (this.ball.x < 500) ? 30 : 955;

                if(this.ball.x > paddleX && this.ball.x < paddleX + 15 && this.ball.y > paddle.y && this.ball.y < paddle.y + 110) {
                    this.ball.vx *= -1.05;
                    let impact = (this.ball.y - (paddle.y + 55)) * 0.3;
                    this.ball.vy = impact;
                    this.shake = 10;
                    AudioSystem.beep(300, 0.1);
                    this.spawnParticles(this.ball.x, this.ball.y, (this.ball.x < 500 ? '#00f2ff' : '#ff007f'));
                    if(this.mode === 'ia') this.p2.error = (Math.random()-0.5)*60;
                }

                // Sistema de Pontuação
                if(this.ball.x < 0) this.score(2);
                if(this.ball.x > 1000) this.score(1);

                // Partículas
                this.particles.forEach((p, i) => {
                    p.x += p.vx; p.y += p.vy; p.life -= 0.03;
                    if(p.life <= 0) this.particles.splice(i, 1);
                });

                if(this.shake > 0) this.shake *= 0.9;
            },

            score(p) {
                p === 1 ? this.p1.score++ : this.p2.score++;
                document.getElementById('p1-score').innerText = this.p1.score;
                document.getElementById('p2-score').innerText = this.p2.score;
                
                this.active = false;
                this.shake = 20;
                AudioSystem.beep(100, 0.5, 'sawtooth');
                
                const ann = document.getElementById('announcer');
                ann.style.opacity = 1;
                setTimeout(() => {
                    ann.style.opacity = 0;
                    this.active = true;
                    this.resetBall();
                    this.loop();
                }, 1000);
            },

            draw() {
                const ctx = this.ctx;
                ctx.save();
                
                // Screen Shake
                if(this.shake > 0.5) ctx.translate((Math.random()-0.5)*this.shake, (Math.random()-0.5)*this.shake);

                // Background
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, 1000, 600);

                // Linha Central Estilizada
                ctx.strokeStyle = 'rgba(255,255,255,0.05)';
                ctx.lineWidth = 2;
                ctx.setLineDash([10, 15]);
                ctx.beginPath(); ctx.moveTo(500, 0); ctx.lineTo(500, 600); ctx.stroke();
                ctx.setLineDash([]);

                // Trail (Rastro)
                this.ball.trail.forEach((t, i) => {
                    ctx.fillStyle = `rgba(0, 242, 255, ${i/30})`;
                    ctx.beginPath(); ctx.arc(t.x, t.y, (i/15)*10, 0, Math.PI*2); ctx.fill();
                });

                // Raquetes Neon
                ctx.shadowBlur = 15;
                ctx.fillStyle = '#00f2ff'; ctx.shadowColor = '#00f2ff';
                ctx.fillRect(30, this.p1.y, 15, 110);
                
                ctx.fillStyle = '#ff007f'; ctx.shadowColor = '#ff007f';
                ctx.fillRect(955, this.p2.y, 15, 110);

                // Bola
                ctx.fillStyle = '#fff'; ctx.shadowColor = '#fff';
                ctx.beginPath(); ctx.arc(this.ball.x, this.ball.y, 10, 0, Math.PI*2); ctx.fill();

                // Partículas FX
                ctx.shadowBlur = 0;
                this.particles.forEach(p => {
                    ctx.globalAlpha = p.life;
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, 3, 3);
                });

                ctx.restore();
            },

            loop() {
                if(!this.active || this.paused) return;
                this.update();
                this.draw();
                requestAnimationFrame(() => this.loop());
            }
        };
    </script>
</body>
</html>
